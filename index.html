<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>School Global Chat</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#0b1020;color:#fff}
header{padding:14px;text-align:center;background:#0e1b36}
#chat{height:72vh;overflow:auto;padding:10px}
.msg{margin:6px 0}
.me{color:#00ffc8}
footer{display:flex;padding:10px;gap:8px;background:#081022}
input,button{padding:10px;border-radius:8px;border:none}
input{flex:1}
button{background:#00ffc8;font-weight:700}
</style>
</head>
<body>
<header>üåç School Global Chat (WebSocket)</header>
<div style="padding:10px">
  <input id="name" placeholder="Your name">
</div>
<div id="chat"></div>
<footer>
  <input id="msg" placeholder="Message">
  <button onclick="send()">Send</button>
</footer>

<script>
// Public demo relay (no guarantee). If it‚Äôs blocked, I can give you another.
const WS_URL = "wss://echo.websocket.events"; // relay-style echo; for real broadcast use a relay I can provide

const ws = new WebSocket(WS_URL);
const chat = document.getElementById('chat');
const id = Math.random().toString(36).slice(2);

ws.onopen = () => log("Connected");
ws.onmessage = e => {
  try {
    const m = JSON.parse(e.data);
    if (m.type === "chat" && m.from !== id)
      log(`${m.name}: ${m.text}`);
  } catch {}
};

function log(text, me=false){
  const d = document.createElement('div');
  d.className = "msg " + (me?"me":"");
  d.textContent = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

function send(){
  const name = document.getElementById('name').value || "Anon";
  const text = document.getElementById('msg').value;
  if (!text) return;
  const payload = {type:"chat", from:id, name, text};
  ws.send(JSON.stringify(payload));
  log(`${name} (you): ${text}`, true);
  document.getElementById('msg').value="";
}
</script>
</body>
</html>
